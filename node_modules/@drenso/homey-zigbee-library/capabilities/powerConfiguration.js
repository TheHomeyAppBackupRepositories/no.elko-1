"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const zigbee_clusters_1 = require("zigbee-clusters");
const attributeDevice_1 = require("../lib/attributeDevice");
async function initPowerConfigurationDevice(device, zclNode, { capabilityId = 'measure_battery', endpointId, } = {}) {
    const reportParser = function (value) {
        // Value comes from uint8
        if (value == 0xFF)
            return null;
        if (value < 0x00 || value > 0xFF) {
            device.error('Battery percentage value outside valid range');
            return null;
        }
        // Specifies the remaining battery life as a half integer percentage of the full battery capacity
        return Math.round(value / 2);
    };
    await (0, attributeDevice_1.initReadOnlyCapability)(device, zclNode, capabilityId, zigbee_clusters_1.CLUSTER.POWER_CONFIGURATION, 'batteryPercentageRemaining', reportParser, endpointId);
}
exports.default = initPowerConfigurationDevice;
